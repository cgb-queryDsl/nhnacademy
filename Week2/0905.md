# 0905 ì •ë¦¬

## ìŠ¤ë ˆë“œ(Thread)
---
### í”„ë¡œì„¸ìŠ¤

- ì‹¤í–‰ ì¤‘ì— ìˆëŠ” í”„ë¡œê·¸ë¨ì„ ì˜ë¯¸.
- ìŠ¤ì¼€ì¤„ë§ì˜ ëŒ€ìƒì´ ë˜ëŠ” ì‘ì—…(Task)ì™€ ê°™ì€ ì˜ë¯¸.
- í•˜ë“œ ë””ìŠ¤í¬ì˜ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ë©´, ì‹¤í–‰ì„ ìœ„í•´ì„œ ë©”ëª¨ë¦¬ í• ë‹¹ì´ ì´ë£¨ì–´ì§€ê³  í• ë‹¹ëœ ë©”ëª¨ë¦¬ ê³µê°„ìœ¼ë¡œ ë°”ì´ë„ˆë¦¬ ì½”ë“œê°€ ì˜¬ë¼ê°.
    - ì´ ìˆœê°„ë¶€í„° í”„ë¡œì„¸ìŠ¤ë¼ê³  ë¶ˆë¦¼.

---

### í”„ë¡œì„¸ì„œ ìŠ¤ì¼€ì¤„ë§
- ì»´í“¨í„°ì˜ CPUëŠ” í•œì •. ëŒ€ë¶€ë¶„ì˜ ê²½ìš° í”„ë¡œì„¸ìŠ¤ëŠ” CPUë³´ë‹¤ ë§ìŒ.
    - ë¬¼ë¦¬ì ì¸ ì—°ì‚°ì¥ì¹˜ëŠ” í”„ë¡œì„¸ì„œ
    - ë…¼ë¦¬ì ì¸ ì—°ì‚°ì¥ì¹˜ëŠ” í”„ë¡œì„¸ìŠ¤
- ìŠ¤ì¼€ì¤„ë§
    - CPU í• ë‹¹ ìˆœì„œ ë° ë°©ë²•ì„ ê²°ì •
    - ìŠ¤ì¼€ì¤„ë§ì— ë”°ë¥¸ ë¶„ë¥˜
        - ì„ ì í˜•(Preemptive)
            - ì„ ì  : ìº„í“¨í„°ì˜ ìì›ì„ ìš°ì„ ì ìœ¼ë¡œ ì°¨ì§€í•  ìˆ˜ ìˆëŠ” ê¶Œí•œ. (*ë‹¤ë§Œ, ì„ ì ê¶Œì„ ê°€ì§€ëŠ” ê²ƒì€ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ê°€ ì•„ë‹Œ ëŒ€ê¸°ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤.*)
            - ì¼ì • ì¡°ê±´ì´ ë§ì„ ë•Œ ì„ ì ê¶Œì„ ì‚¬ìš© ê°€ëŠ¥.
            - ì¼ë°˜ì ì¸ ìš´ì˜ì²´ì œì—ì„œ ì‚¬ìš©
        - ë¹„ì„ ì í˜•(Non-Preemptive)
            - í”„ë¡œì„¸ìŠ¤ê°€ ìë°œì ìœ¼ë¡œ ìì›ì„ ë°˜ë‚©í•˜ê¸° ì „ê¹Œì§€ CPU ì‚¬ìš©ê¶Œì€ ë„˜ì–´ê°€ì§€ ì•ŠìŒ.
            - ì¼ë°˜ì ì¸ Realtime OSì—ì„œ ì‚¬ìš©
    - ì¼ì •í•œ ê¸°ì¤€ì¸ Algorithmì„ í†µí•´ ê²°ì •
        - FCFS (First Come First Serve)
        - SJF (Shortest Job First)
        - HRN (Highest Response Ratio Next Scheduling)
        - Priority Scheduling
        - Round Robin Scheduling

---
## ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜
### FCFS (First Come First Serve)
- ë¹„ì„ ì í˜• ìŠ¤ì¼€ì¤„ë§ ê¸°ë²•.
- ë¨¼ì € ë„ì°©í•œ ìˆœì„œì— ë”°ë¼ ì²˜ë¦¬.
- í”„ë¡œì„¸ìŠ¤ì˜ ì²˜ë¦¬ ì‹œê°„ì´ ê¸¸ ê²½ìš°, ëŒ€ê¸° í”„ë¡œì„¸ìŠ¤ì˜ ëŒ€ê¸° ì‹œê°„ì´ ê¸¸ì–´ì§€ëŠ” ë¬¸ì œì ì´ ìˆìŒ.

---
### SJF (Shortest Job First)
- ë¹„ì„ ì í˜• ìŠ¤ì¼€ì¤„ë§ ê¸°ë²•.
- ì‹¤í–‰ì‹œê°„ì´ ê°€ì¥ ì§§ì€ ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬.
- ì‹¤í–‰ì‹œê°„ì´ ê¸´ í”„ë¡œì„¸ìŠ¤ëŠ” ë¬´í•œ ëŒ€ê¸° ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆìŒ.

---
### HRN (Highest Response Ratio Next Scheduling)
- ë¹„ì„ ì í˜• ìŠ¤ì¼€ì¤„ë§ ê¸°ë²•.
- í”„ë¡œì„¸ìŠ¤ì˜ ì‹¤í–‰ì‹œê°„ì´ ê°€ì¥ ì ì€ í”„ë¡œì„¸ìŠ¤ë¥¼ ë¨¼ì € ì‹¤í–‰ì‹œí‚¤ëŠ” ê¸°ë²•.
- SJFì™€ ë¹„ìŠ·, SJFì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¬´í•œëŒ€ê¸° ë¬¸ì œë¥¼ í•´ê²°í•œ ë°©ë²•.
- ëŒ€ê¸°ì‹œê°„ê³¼ ì‹¤í–‰ì‹œê°„ìœ¼ë¡œ ì‹œìŠ¤í…œ ì‘ë‹µ ì‹œê°„ì„ ì •ì˜í•´ì„œ í° í”„ë¡œì„¸ìŠ¤ë¥¼ ìš°ì„  ì²˜ë¦¬.
$$ì‹œìŠ¤í…œ ì‘ë‹µì‹œê°„ = \frac{(ëŒ€ê¸°ì‹œê°„ + ì‹¤í–‰ì‹œê°„)}{ì‹¤í–‰ì‹œê°„} $$

---
### Priority Scheduling
- ì„ ì í˜• / ë¹„ì„ ì í˜• ìŠ¤ì¼€ì¤„ë§ ê¸°ë²•.
- íŠ¹ì • ê·œì¹™ì— ë”°ë¼ ë¯¸ë¦¬ í”„ë¡œì„¸ìŠ¤ì— ìš°ì„ ìˆœìœ„ë¥¼ ë§¤ê²¨ì„œ ê·¸ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ì‹œí‚¤ëŠ” ê¸°ë²•.
- ë¹„ì„ ì í˜•ì˜ ê²½ìš° ìš°ì„  ìˆœìœ„ê°€ ë‚®ì„ ê²½ìš° ë¬´í•œ ëŒ€ê¸°ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ.(*ì‹¤ì œ RTOSì—ì„œ ë°œìƒí•¨*)
- ì„ ì í˜•ì˜ ê²½ìš° ì‹¤í–‰ì— ë”°ë¼ ì¡°ê±´ì´ ë³€ê²½ë˜ì–´ ìš°ì„  ìˆœìœ„ê°€ ë†’ì•„ì§„ í”„ë¡œì„¸ìŠ¤ê°€ ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ í”„ë¡œì„¸ì„œë¥¼ ë¹¼ì•—ì•„ ì˜¬ ìˆ˜ ìˆìŒ.

---
### Round Robin Scheduling
- ì„ ì í˜• ìŠ¤ì¼€ì¤„ë§ ê¸°ë²•.
- í”„ë¡œì„¸ìŠ¤ì˜ ì¢…ë£Œ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ì¼ì • ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ëŒì•„ê°€ë©´ì„œ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ë¨.
- í”„ë¡œì„¸ìŠ¤ ì „í™˜ ì‹œê°„ì´ ì§§ìœ¼ë©´ ì˜¤ë²„í—¤ë“œê°€ ë§ì•„ì§€ëŠ” ë‹¨ì ì´ ìˆìŒ.

---
### ìƒíƒœ ë³€í™”
<img width="1156" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-05 á„‹á…©á„’á…® 5 43 07" src="https://user-images.githubusercontent.com/87689191/188407501-5421a493-88de-446a-9261-cd7ae132f0ee.png">

- **New** : í”„ë¡œì„¸ìŠ¤ ìƒì„±(ì‹¤í–‰ì „)
- **Ready** : í”„ë¡œì„¸ìŠ¤ê°€ í”„ë¡œì„¸ì„œì—ì„œ ì‹¤í–‰ë˜ê¸° ìœ„í•´ ëŒ€ê¸°ì¤‘ì¸ ìƒíƒœ
- **Running** : í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ë˜ê³  ìˆëŠ” ìƒíƒœ
- **Blocked(Wait)** : í”„ë¡œì„¸ìŠ¤ê°€ íŠ¹ì • ìì›ì´ë‚˜ ì´ë²¤íŠ¸ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ìƒíƒœ
- **Terminated** : í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ì„ ì™„ë£Œí•œ ìƒíƒœ

---
### í”„ë¡œì„¸ìŠ¤ì™€ ìŠ¤ë ˆë“œ
- í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ëŠ” ì—¬ëŸ¬ ê°œì˜ ìŠ¤ë ˆë“œë¡œ êµ¬ì„± ê°€ëŠ¥.
- í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬ì„±í•˜ëŠ” ìŠ¤ë ˆë“œëŠ” í”„ë¡œì„¸ìŠ¤ì— í• ë‹¹ëœ ë©”ëª¨ë¦¬ì™€ ìì›ì„ êµ¬ì„±.
- ê° ìŠ¤ë ˆë“œë³„ë¡œ Stackê³¼ Registerë¥¼ ê°€ì§€ê³  ìˆìŒ.
- í•œ ë²ˆì— í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œ ì‹¤í–‰ ê°€ëŠ¥.

<img width="928" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-05 á„‹á…©á„’á…® 5 48 28" src="https://user-images.githubusercontent.com/87689191/188408609-1b11967a-6c96-41ef-918d-27d5ac18a791.png">

---
### Javaì—ì„œ ìŠ¤ë ˆë“œ êµ¬í˜„

### **Thread** class Version
### Code
<details>
    <summary> ExtendedThread </summary>

```java
public class ExtendedThread extends Thread {
    private String message;
    private int loopCount;

    public ExtendedThread(String message) {
        this.message = message;
        this.loopCount = 0;
    }

    @Override
    public void run() {
        while(!Thread.interrupted()) {
            try {
                ++this.loopCount;
                System.out.println(this.message + " : " + this.loopCount);
                Thread.sleep((long) (Math.random() * 1000));
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}
```

</details>

<br/>

### Test Code

<details>
    <summary> ExtendedThreadTest </summary>

```java
class ExtendedThreadTest {

    public static void main(String[] args){
        ExtendedThread thread1 = new ExtendedThread("One");
        ExtendedThread thread2 = new ExtendedThread("Two");
        ExtendedThread thread3 = new ExtendedThread("Three");

        thread1.start();
        thread2.start();
        thread3.start();
    }
}
```

```java
// ì¶œë ¥
Two : 1 
One : 1 
Three : 1 
Three : 2 
Two : 2 
Two : 3 
One : 2 
Three : 3 
Two : 4 
Three : 4 
One : 3 
One : 4 
Two : 5 
Three : 5
Two : 6 
One : 5 
One : 6 
Two : 7 
Three : 6 
Two : 8 
Three : 7 
Two : 9 
One : 7 
Two : 10 
Three : 8
```

</details>

---

### **Runnable** interface Version

### Code

<details>
    <summary> RunnableThread </summary>

```java
import java.util.concurrent.locks.ReentrantLock;

public class RunnableThread implements Runnable {
    private String message;
    private int loopCount;
    private int intervalMs;

    static private final ReentrantLock lock= new ReentrantLock();

    public RunnableThread(String message, int intervalMs) {
        this.message = message;
        this.loopCount = 0;
        this.intervalMs = intervalMs;
    }

    public void wakeUp() {
        notify();
    }

    synchronized  public static void task1(RunnableThread thread, long startTime, long previousTime) throws InterruptedException {
        long currentTime = System.currentTimeMillis();
        long totalElapsedTime = currentTime - startTime;
        long elapsedTime = currentTime - previousTime;
        System.out.println(String.format("%8d : %8d : %s - %d", totalElapsedTime, elapsedTime, thread.message , thread.loopCount));
        Thread.sleep((long) (thread.intervalMs));
    }

    @Override
    public void run() {
        long startTime = System.currentTimeMillis();
        long previousTime = startTime;

        System.out.println(String.format("%8d : %8d : %s - %d", 0, 0, message , this.loopCount));
        while(!Thread.interrupted()) {
            try {
                long currentTime = System.currentTimeMillis();
                long totalElapsedTime = currentTime - startTime;
                long elapsedTime = currentTime - previousTime;
                previousTime = currentTime;
                ++this.loopCount;
                task1(this, startTime, previousTime);

            } catch (InterruptedException e) {
                System.out.println("Woke up by an interruption.");
            }
        }
    }
}
```

</details>

<br/>

### Test Code

<details>
    <summary> RunnableThreadTest </summary>

```java
class RunnableThreadTest {

    public static void main(String[] args) throws InterruptedException {
        Thread thread1 = new Thread(new RunnableThread("One", 5000));
        Thread thread2 = new Thread(new RunnableThread("Two", 7000));
        Thread thread3 = new Thread(new RunnableThread("Three", 9000));

        thread1.start();
        thread2.start();
        thread3.start();
        thread2.join();
        while(true) {
            Thread.sleep(3000);
            thread1.interrupt();
            thread2.interrupt();
            thread3.interrupt();
        }
    }
}
```

```java
// ì¶œë ¥
       0 :        0 : One - 0
       0 :        0 : Two - 0
       0 :        0 : Three - 0
      53 :        0 : One - 1
    5060 :     5007 : Three - 1
   14068 :    14015 : Two - 1
   21075 :     7007 : Three - 2
   30081 :    25021 : One - 2
   35085 :     5004 : Three - 3
   44092 :    23016 : Two - 2
```

</details>

---

### Class Thread vs Interface Runnable

- Thread class
    - ë‹¤ë¥¸ í´ë˜ìŠ¤ì˜ ìƒì†ì´ ë¶ˆê°€ëŠ¥.
    - ê°ì²´ ìƒì„± í›„ ë°”ë¡œ ì‹¤í–‰ ê°€ëŠ¥.

- Runnable interface
    - ë‹¤ë¥¸ í´ë˜ìŠ¤ì—ì„œ ìƒì†ì„ í†µí•´ êµ¬í˜„ ê°€ëŠ¥.
    - ê°ì²´ ìƒì„± í›„ ë°”ë¡œ ì‚¬ìš© ë¶ˆê°€ëŠ¥. ì¶”ê°€ì ì¸ Thread ê°ì²´ê°€ í•„ìš”.

---

### ë‹¨ì¼ ìŠ¤ë ˆë“œ
- Main ìŠ¤ë ˆë“œì—ì„œ ì‘ì—… ì§„í–‰, ì‘ì—…ì€ ìˆœì°¨ì  ì§„í–‰.
- í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì˜¤ì§ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë¡œë§Œ ì§„í–‰.
    - [&#128083;](#í”„ë¡œì„¸ìŠ¤ì™€-ìŠ¤ë ˆë“œ) ë‹¨ì¼ ë ˆì§€ìŠ¤í„°ì™€ ìŠ¤íƒìœ¼ë¡œ êµ¬ì„±.
    - Context Switching(ë¬¸ë§¥ êµí™˜) ì‘ì—…ì„ ìš”êµ¬í•˜ì§€ ì•ŠìŒ.
    - ë™ì‹œì„± ì œì–´ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ë¨.

<br/>

### ë©€í‹° ìŠ¤ë ˆë“œ
- í”„ë¡œê·¸ë¨ ë‚´ì—ì„œ ë‘ ê°œ ì´ìƒì˜ ë™ì‘ì„ ë™ì‹œì— ì‹¤í–‰.
    - í”„ë¡œì„¸ì„œì˜ í™œë™ì„ ê·¹ëŒ€í™”.
    - ë‘ê°œê°€ ë™ì‘ì„ ë™ì‹œì— ì‹¤í–‰.
- í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¤ìˆ˜ì˜ ì‹¤í–‰ ë‹¨ìœ„ë¡œ êµ¬ë¶„í•˜ì—¬ ìì›ì„ ê³µìœ .
    - ìì›ì˜ ìƒì„±ê³¼ ê´€ë¦¬ì˜ ì¤‘ë³µì„± ìµœì†Œí™”.
    - ìˆ˜í–‰ ëŠ¥ë ¥ í–¥ìƒ.

---

### ìŠ¤ë ˆë“œ ìƒíƒœ
![ìº¡ì²˜](https://user-images.githubusercontent.com/87689191/188434235-f907d076-8f0f-41ee-b0ee-38cb134365bf.PNG)

- **New** : ìŠ¤ë ˆë“œê°€ ì‹¤í–‰ ì¤€ë¹„ë¥¼ ì™„ë£Œí•œ ìƒíƒœ. start() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê¸° ì „ ìƒíƒœ.
- **Runnable** : start()ê°€ í˜¸ì¶œë˜ì–´ ì‹¤í–‰ë  ìˆ˜ ìˆëŠ” ìƒíƒœ.
- **Wait** : ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ í†µì§€í•  ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” ìƒíƒœ.
- **Timed_Wait** : ì •í•´ì§„ ì‹œê°„ë™ì•ˆ ê¸°ë‹¤ë¦¬ëŠ” ìƒíƒœ.
- **Blocked** : ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ê°ì²´ì˜ ì ê¸ˆ(lock)ì´ í’€ë¦´ ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ëŠ” ìƒíƒœ.
- **Terminated** : ì‹¤í–‰ì´ ì¢…ë£Œëœ ìƒíƒœ

---
### ìŠ¤ë ˆë“œ ìƒíƒœ ì „ì´

| **ë©”ì„œë“œ**  | **ì„¤ëª…** |
|:---:| :---:|
|`interrupt()`| ì¼ì‹œ ì •ì§€ ìƒíƒœì¸ ìŠ¤ë ˆë“œì— InterruptedException ì˜ˆì™¸ë¥¼ ë°œìƒì‹œì¼œ ì˜ˆì™¸ ì²˜ë¦¬ ì½”ë“œì—ì„œ ì‹¤í–‰ ëŒ€ê¸° ìƒíƒœë¡œ ê°€ê±°ë‚˜ ì¢…ë£Œ ìƒíƒœë¡œ ê°€ë„ë¡ í•¨|
|`notify()` <br/> `notifyAll()`| Block ìƒíƒœì—ì„œ wait() ë©”ì„œë“œì— ì˜í•´ Wait ìƒíƒœ ìŠ¤ë ˆë“œë¥¼ Runnable ìƒíƒœë¡œ ë§Œë“¦ |
|`sleep(long millis)` <br/> `sleep(long millis, int nanos)` | ì£¼ì–´ì§„ ì‹œê°„ë™ì•ˆ ìŠ¤ë ˆë“œë¥¼ Timed_Wait ìƒíƒœë¡œ ë§Œë“¤ê³  ì‹œê°„ì´ ì§€ë‚˜ë©´ ìë™ìœ¼ë¡œ Runnable ìƒíƒœë¡œ ë°”ë€œ |
| `join()` <br/> `join(long millis)` <br/> `join(long millis, int nanos)` | join() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ìŠ¤ë ˆë“œëŠ” wait ìƒíƒœê°€ ë¨. join ë©”ì„œë“œë¥¼ ë©¤ë²„ë¡œ ê°€ì§€ëŠ” ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë˜ê±°ë‚˜ ì£¼ì–´ì§„ ì‹œê°„ì´ ì§€ë‚˜ë©´ Runnable ìƒíƒœë¡œ ë°”ë€œ |
|`wait()` <br/> `wait(long millis)` <br/> `wait(long millis, int nanos)` | Blockì—ì„œ ìŠ¤ë ˆë“œë¥¼ wait ìƒíƒœë¡œ ë§Œë“¦. <br/> ì£¼ì–´ì§„ ì‹œê°„ì´ ì§€ë‚˜ë©´ Runnable ìƒíƒœê°€ ë˜ê³  ì‹œê°„ì´ ì£¼ì–´ì§€ì§€ ì•Šì€ ê²½ìš° notify(), notifyAll() ë©”ì„œë“œì— ì˜í•´ Runnable ìƒíƒœë¡œ ë³€ê²½|
|`yield()` | ì‹¤í–‰ì¤‘ì— ìš°ì„ ìˆœìœ„ê°€ ë™ì¼í•˜ê±°ë‚˜ ë†’ì€ ìˆœìœ„ì˜ ìŠ¤ë ˆë“œë¥¼ ì‚°ì¶œí•˜ê³  waitìƒíƒœë¡œ ë³€ê²½ |

  
---

### interrupt() í…ŒìŠ¤íŠ¸

### Test Code

<details>
    <summary> InterruptTest </summary>

```java
public class InterruptTest {
    static class Task extends Thread {
        public void run() {
            System.out.println("started");
            try {
                while(true) {
                    System.out.println("running!");
                    Thread.sleep(1000);
                }
            } catch(InterruptedException e) {
                System.out.println("Interrupt occurred!");
            }

            System.out.println("finished");
        }
    }

    public static void main(String[] args) {
        Thread thread = new Task();
        thread.start();

        try {
            Thread.sleep(3000);
        } catch (InterruptedException e) {

        }

        thread.interrupt();
    }
}
```

```java
// ì¶œë ¥
started
running!
running!
running!
running!
Interrupt occurred!
finished
```

</details>

---

### sleep() í…ŒìŠ¤íŠ¸

### Test Code

<details>
    <summary> ThreadSleepTest </summary>

```java
import java.time.LocalDateTime;

public class TestThreadSleep {
    static class Task extends Thread {
        @Override
        public void run() {
            System.out.println("[ " + LocalDateTime.now() + " ] " + Thread.currentThread().getName() + ": ì‹œì‘");
            while(true) {
                try {
                    System.out.println("[ " + LocalDateTime.now() + " ] " + Thread.currentThread().getName() + ": ì ì— ë“­ë‹ˆë‹¤.");
                    Thread.sleep(1000);
                    System.out.println("[ " + LocalDateTime.now() + " ] " + Thread.currentThread().getName() + ": ì ì—ì„œ ê¹¨ì–´ ë‚©ë‹ˆë‹¤.");
                } catch (InterruptedException e) {
                    break;
                }

            }
            System.out.println("[ " + LocalDateTime.now() + " ] " + Thread.currentThread().getName() + ": ì¢…ë£Œ");
        }
    }

    public static void main(String [] args) throws InterruptedException {
        Task task1 = new Task();

        task1.start();

        task1.join();
    }
}

```

```java
// ì¶œë ¥
[ 2022-09-05T21:19:03.406780600 ] Thread-0: ì‹œì‘
[ 2022-09-05T21:19:03.425780800 ] Thread-0: ì ì— ë“­ë‹ˆë‹¤.
[ 2022-09-05T21:19:04.429779100 ] Thread-0: ì ì—ì„œ ê¹¨ì–´ ë‚©ë‹ˆë‹¤.
[ 2022-09-05T21:19:04.430779600 ] Thread-0: ì ì— ë“­ë‹ˆë‹¤.
[ 2022-09-05T21:19:05.443568400 ] Thread-0: ì ì—ì„œ ê¹¨ì–´ ë‚©ë‹ˆë‹¤.
[ 2022-09-05T21:19:05.443568400 ] Thread-0: ì ì— ë“­ë‹ˆë‹¤.
[ 2022-09-05T21:19:06.447085100 ] Thread-0: ì ì—ì„œ ê¹¨ì–´ ë‚©ë‹ˆë‹¤.
```

</details>

---
### join() í…ŒìŠ¤íŠ¸
### Test Code

<details>
    <summary> ThreadJoinTest </summary>

```java
import java.time.LocalDateTime;

public class ThreadJoinTest {

    public static class Task implements Runnable {
        String name;
        int loopCount;
        int maxLoopCount;
        int interval;

        public Task(String name, int interval, int maxLoopCount) {
            this.name = name;
            this.interval = interval;
            this.maxLoopCount = maxLoopCount;
        }

        @Override
        public void  run() {
            System.out.printf("[ %s ] : %sì´ ì‹œì‘ ë˜ì—ˆìŠµë‹ˆë‹¤.\n", LocalDateTime.now(), this.getName());
            try {
                while(this.getLoopCount() < this.getMaxLoopCount()) {
                    Thread.sleep(this.getInterval());
                    this.incrementLoopCount();
                    System.out.printf("[ %s ] : %sì´ %dë²ˆì§¸ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.\n", LocalDateTime.now(), this.getName(), this.getLoopCount());
                }
            } catch (InterruptedException e) {
                throw new RuntimeException(e);
            }
            System.out.printf("[ %s ] : %sì´ ì¢…ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤.\n", LocalDateTime.now(), this.getName());
        }

        public String getName() {
            return  this.name;
        }

        public int getInterval() {
            return  this.interval;
        }

        public int getMaxLoopCount() {
            return  this.maxLoopCount;
        }

        public int getLoopCount() {
            return  this.loopCount;
        }

        public void incrementLoopCount() {
            ++this.loopCount;
        }
    }

    public static void main(String[] args) throws InterruptedException {
        Thread thread = new Thread(new Task("one", 1000, 3));

        System.out.printf("[ %s ] : mainì—ì„œ ìŠ¤ë ˆë“œë¥¼ ì‹œì‘ì‹œí‚µë‹ˆë‹¤.\n", LocalDateTime.now());
        thread.start();

        System.out.printf("[ %s ] : mainì—ì„œ ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë˜ê¸¸ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.\n", LocalDateTime.now());
        thread.join();

        System.out.printf("[ %s ] : %sê°€ ì¢…ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤.\n", LocalDateTime.now(), Thread.currentThread().getName());
    }
}
```

```java
// ì¶œë ¥
[ 2022-09-05T21:46:47.422301400 ] : mainì—ì„œ ìŠ¤ë ˆë“œë¥¼ ì‹œì‘ì‹œí‚µë‹ˆë‹¤.
[ 2022-09-05T21:46:47.435299400 ] : mainì—ì„œ ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë˜ê¸¸ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
[ 2022-09-05T21:46:47.435299400 ] : oneì´ ì‹œì‘ ë˜ì—ˆìŠµë‹ˆë‹¤.
[ 2022-09-05T21:46:48.445837 ] : oneì´ 1ë²ˆì§¸ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.
[ 2022-09-05T21:46:49.445850900 ] : oneì´ 2ë²ˆì§¸ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.
[ 2022-09-05T21:46:50.456114900 ] : oneì´ 3ë²ˆì§¸ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.
[ 2022-09-05T21:46:50.456114900 ] : oneì´ ì¢…ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
[ 2022-09-05T21:46:50.456114900 ] : mainê°€ ì¢…ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
```

</details>

---

### yield() í…ŒìŠ¤íŠ¸

### Test Code
```java
public class ThreadYieldTest {
    static class MyThread extends Thread {
        public void run() {
            for (int i = 0; i < 5; ++i) {
                //Thread.yield();
                System.out.println("Thread started:" + Thread.currentThread().getName());
            }
            System.out.println("Thread ended:" + Thread.currentThread().getName());
        }
    }

    public static void main(String[] args) {
        MyThread thread = new MyThread();
        thread.start();
        for (int i = 0; i < 5; ++i) {
            System.out.println("Thread started:" + Thread.currentThread().getName());
        }
        System.out.println("Thread ended:" + Thread.currentThread().getName());
    }
}
```

<br/>

### ì˜ˆìƒ ê²°ê³¼
```java
// ì¶œë ¥
Thread started:main
Thread started:Thread-0
Thread started:main
Thread started:Thread-0
Thread started:main
Thread started:Thread-0
Thread started:main
Thread started:Thread-0
Thread started:main
Thread started:Thread-0
Thread ended:main
Thread ended:Thread-0
```

### ì‹¤ì œ ê²°ê³¼ (ë§¤ë²ˆ ë°”ë€œ)

```java
// ì¶œë ¥ 
Thread started:Thread-0
Thread started:Thread-0
Thread started:main
Thread started:Thread-0
Thread started:main
Thread started:Thread-0
Thread started:main
Thread started:main
Thread started:Thread-0
Thread ended:Thread-0
Thread started:main
Thread ended:main
```

ìì›ì„ **ê³µìœ ** í•´ì„œ ìƒê¸°ëŠ” ë¬¸ì œ!!

---

## ìŠ¤ë ˆë“œ ë™ì‹œì„± ì œì–´

---
### ì„ê³„ êµ¬ì—­(Critical Section)
- ë‘ê°œ ì´ìƒì˜ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì ‘ê·¼í•´ì„œëŠ” ì•ˆë˜ëŠ” ê³µìœ  ìì›ì„ ì ‘ê·¼í•˜ëŠ” ì½”ë“œì˜ ì¼ë¶€.
- ìŠ¤ë ˆë“œì—ì„œ ì‘ì—…ì— í•„ìš”í•œ ìµœì†Œí•œ ì‹œê°„ ë™ì•ˆë§Œ ìœ ì§€ë˜ì–´ì•¼í•˜ê³  ì‘ì—… í›„ì— ë°˜ë“œì‹œ í•´ì œ.
- ìƒí˜¸ ë°°ì œ(Mutual Exclustion)ì„ ë³´ì¥í•´ì•¼ í•¨.
  
<br/>

### Javaì—ì„œ ë™ì‹œì„± ì œì–´
- `synchronized`
- `Thread.wait & Thread.notify`

### ì´ì 
- ë©€í‹°ìŠ¤ë ˆë“œ
    - JavaëŠ” ë©€í‹°ìŠ¤ë ˆë“œ ì–¸ì–´ë¡œ, ë™ê¸°í™”ëŠ” ê³µìœ  ë¦¬ì†ŒìŠ¤ì—ì„œ ìƒí˜¸ ë°°ì œë¥¼ ë‹¬ì„±í•˜ëŠ” ì¢‹ì€ ë°©ë²•.
- ì¸ìŠ¤í„´ìŠ¤ ë° ì •ì  ë©”ì„œë“œ
    - ë™ê¸°í™”ëœ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œì™€ ì •ì  ë©”ì„œë“œëŠ” ì„œë¡œ ë‹¤ë¥¸ ê°ì²´ë¥¼ ì ê·¸ëŠ” ë° ì‚¬ìš©ë˜ë¯€ë¡œ ë™ì‹œì— ì‹¤í–‰ ê°€ëŠ¥.

### ì œí•œ ì‚¬í•­
- ë™ì‹œì„± ì œí•œ
    - Java ë™ê¸°í™”ëŠ” ë™ì‹œ ì½ê¸°ë¥¼ í—ˆìš©í•˜ì§€ ì•ŠìŒ.
- íš¨ìœ¨ì„± ê°ì†Œ
    - Java ë™ê¸°í™”ëœ ë©”ì„œë“œëŠ” ë§¤ìš° ëŠë¦¬ê²Œ ì‹¤í–‰ë˜ë©° ì„±ëŠ¥ì´ ì €í•˜ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë°˜ë“œì‹œ í•„ìš”í•˜ì§€ ì•Šì„ ë•Œ ë©”ì„œë“œë¥¼ ë™ê¸°í™”í•˜ê³  ì½”ë“œì˜ ì¤‘ìš”í•œ ì„¹ì…˜ì— ëŒ€í•´ì„œë§Œ ë™ê¸°í™” í•´ì•¼í•¨.
---
### ë¬¸ì œ 1. ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•´ ìƒíƒœ ì „ì´ë¥¼ í™•ì¸

### Test Code

<details>
    <summary> Q1 </summary>

```java
public class Q1 {

    public static void main(String[] args) throws InterruptedException {
        Thread thread1 = new Thread("Thread1");
        Thread thread2 = new Thread("Thread2");

        System.out.println(thread1.getState());
        System.out.println(thread2.getState());

        thread1.start();
        thread2.start();

        System.out.println(thread1.getState());
        System.out.println(thread2.getState());

        thread1.sleep(3000);
        System.out.println(thread1.getState());
        System.out.println(thread2.getState());

        thread1.interrupt();
        System.out.println(thread1.getState());

        thread1.join();
        System.out.println(thread1.getState());
    }
}

```

```java
// ì¶œë ¥
NEW
NEW
RUNNABLE
RUNNABLE
TERMINATED
TERMINATED
TERMINATED
TERMINATED
```

</details>

---
### ë¬¸ì œ 2. ìŠ¤ë ˆë“œë¥¼ ì¤‘ì§€ ì‹œí‚¤ê¸°

### Test Code

<details>
    <summary> Q2 </summary>

```java
public class Q2 {

    public static void main(String[] args) throws InterruptedException {
        RunnableThread thread1 = new RunnableThread("One", 5000);
        RunnableThread thread2 = new RunnableThread("Two", 7000);

        Thread t1 = new Thread(thread1);
        Thread t2 = new Thread(thread2);

        t1.start();
        t2.start();

        while (true) {
            Thread.sleep(2000);
            System.out.println("Thread1 : " + t1.getState());
            System.out.println("Thread2 : " + t2.getState());

            System.out.println("Interrupted");
            t1.interrupt();
            t2.interrupt();
        }
    }
}
```

```java
// ì¶œë ¥
       0 :        0 : Two - 0
       0 :        0 : One - 0
      44 :        0 : Two - 1
Thread1 : BLOCKED
Thread2 : TIMED_WAITING
Interrupted
Woke up by an interruption.
    2056 :     2012 : One - 1
Woke up by an interruption.
    2057 :        1 : Two - 2
Thread1 : BLOCKED
Thread2 : TIMED_WAITING
Interrupted
Woke up by an interruption.
    4058 :     2001 : One - 2
Woke up by an interruption.
    4058 :        0 : Two - 3
```

</details>

---

### ë§ˆë¬´ë¦¬...
ìŠ¤ë ˆë“œë€ ê°œë… ìì²´ëŠ” ìš´ì˜ì²´ì œ ì‹œê°„ì—ì„œ ë°°ì› ë˜ ì ì´ ìˆë‹¤. ìŠ¤ë ˆë“œì™€ ê´€ë ¨ìˆëŠ” ë°ë“œë½ê³¼ ê°™ì€ ìš©ì–´ë„ ì´ë¯¸ ì•Œê³ ëŠ” ìˆì—ˆë‹¤. í•˜ì§€ë§Œ ì§€ê¸ˆê» í”„ë¡œê·¸ë˜ë°ì„ í•˜ë©´ì„œ ìŠ¤ë ˆë“œ, ë°ë“œë½ê³¼ ê°™ì€ ê²ƒë“¤ì„ ìƒê°í•˜ë©´ì„œ ì½”ë”©ì„ í•´ë³¸ì ì´ ì—†ì—ˆì–´ì„œ ëª¨ë“  ë¬¸ì œë“¤ì„ í’€ì§€ ëª»í–ˆë‹¤...
  
ë¬¸ì œëŠ” ë‹¤ í’€ì§€ ëª»í–ˆì§€ë§Œ ì •ë¦¬í•œ ê°œë…, ì´ë¡ ì„ ë” ì´í•´í•´ë³´ë ¤ê³  í•œë‹¤.
  
íƒœí’ì´ ì™€ì„œ 5ì¼ì€ ì˜¤ì „ ìˆ˜ì—…ë§Œ, 6ì¼ì€ íœ´ê°•ì„ í–ˆëŠ”ë° 1ì£¼ì¼ ë°–ì— ìˆ˜ì—…ì„ ì•ˆí–ˆì–´ë„ íœ´ì‹ì´ ìƒê¸°ë‹ˆê¹Œ ì¢‹ì•˜ë‹¤. í•˜ë£¨ì˜ ì—¬ìœ ê°€ ìˆì–´ì„œ ë³µìŠµí•  ì‹œê°„ì´ ë§ì•„ì ¸ì„œ ë‚˜ì˜ì§€ ì•Šì€ íœ´ê°•ì´ë¼ ìƒê°í•˜ë©° ë§ˆë¬´ë¦¬!!ğŸ‘ğŸ‘
