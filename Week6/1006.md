# 1006 ì •ë¦¬

ë¹Œë“œ ë„êµ¬ ì¤‘ í•˜ë‚˜ì¸ Mavenì— ëŒ€í•´ ë°°ìš´ ì‹œê°„.

---

### Maven
- Javaì˜ ëŒ€í‘œì ì¸ ë¹Œë“œ íˆ´ ì¤‘ í•˜ë‚˜
- apache ì¬ë‹¨ì—ì„œ ê°œë°œí•œ ì˜¤í”ˆì†ŒìŠ¤
- apache antì˜ í›„ì† ê°œë°œ
- **XMLì„ ì‚¬ìš©í•´ì„œ ë¹Œë“œ íŒŒì¼ì„ ê¸°ìˆ **
- ì¤‘ì•™ ì €ì¥ì†Œë¥¼ ì´ìš©í•œ í¸ë¦¬í•œ ì˜ì¡´ ê´€ê³„ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê´€ë¦¬

<br/>

**Maven ì¥ì **
- í¸ë¦¬í•œ ì˜ì¡´ ê´€ê³„ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê´€ë¦¬
- ì¼ê´€ëœ ë””ë ‰í† ë¦¬ êµ¬ì¡°ì™€ ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬
- ë‹¤ì–‘í•œ í”ŒëŸ¬ê·¸ì¸

<br/>

**Maven ë‹¨ì **
- ê¸°ë³¸ì ìœ¼ë¡œ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¹Œë“œ ê³¼ì • ì¶”ê°€ê°€ ë³µì¡í•´ì§
- í”ŒëŸ¬ê·¸ì¸ì˜ ì„¤ì •ì´ ìƒì´í•˜ê±°ë‚˜ ì¥í™©í•´ì§€ë©´ ì¬ì‚¬ìš©ì„± ë° í™•ì¥ì„±ì´ ë–¨ì–´ì§

---

### Maven Project

**í”„ë¡œì íŠ¸ ìƒì„±**
- Intellij -> New Project -> ì‹œìŠ¤í…œ ë¹Œë“œì—ì„œ `Maven` ì„ íƒ

<br/>

**ê¸°ë³¸ Maven í”„ë¡œì íŠ¸ êµ¬ì¡°
```
.
â”œâ”€â”€ pom.xml
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ main
â”‚   â”‚   â”œâ”€â”€ java
â”‚   â”‚   â””â”€â”€ resources
â”‚   â””â”€â”€ test
â”‚       â””â”€â”€ java
â””â”€â”€ test.iml
```

---
### pom.xml
- Project Object Model(POM) : Mavenì—ì„œ ë¹Œë“œì™€ ê´€ë ¨ëœ ì •ë³´ë¥¼ ë‹´ì€ ê¸°ë³¸ ì‘ì—… ë‹¨ìœ„
- í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ê¸° ìœ„í•œ ì„¤ì • ì •ë³´

<br/>

**êµ¬ì„±**
- í”„ë¡œì íŠ¸ ê¸°ë³¸ ì •ë³´
    - í”„ë¡œì íŠ¸ ì´ë¦„
    - í”„ë¡œì íŠ¸ URL
- í”„ë¡œì íŠ¸ ê´€ê³„ ì„¤ì •
    - ëª¨ë“ˆ
    - ì˜ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì •
- ë¹Œë“œ ì„¤ì •
    - ì†ŒìŠ¤ ë””ë ‰í„°ë¦¬
    - í…ŒìŠ¤íŠ¸ ì†ŒìŠ¤ ë””ë ‰í„°ë¦¬
    - ë¦¬ì†ŒìŠ¤ ë””ë ‰í„°ë¦¬
    - í”ŒëŸ¬ê·¸ì¸
- ë¹Œë“œ í™˜ê²½
    - í”„ë¡œíŒŒì¼

---

### ë¹Œë“œ ë¼ì´í”„ ì‚¬ì´í´
- Mavenì—ì„œ ë¯¸ë¦¬ ì •ì˜í•˜ê³  ìˆëŠ” ë¹Œë“œ ìˆœì„œ

<br/>

**ì¢…ë¥˜**
- ê¸°ë³¸ ë¼ì´í”„ ì‚¬ì´í´ : ì†ŒìŠ¤ ì½”ë“œë¥¼ ì»´íŒŒì¼, í…ŒìŠ¤íŠ¸, ì••ì¶•, ë°°í¬
- clean ë¼ì´í”„ ì‚¬ì´í´ : ë¹Œë“œ ê²°ê³¼ë¬¼ì„ ì œê±°
- site ë¼ì´í”„ ì‚¬ì´í´ : í”„ë¡œì íŠ¸ ë¬¸ì„œ ì‚¬ì´íŠ¸ ìƒì„±

<br/>

**í˜ì´ì¦ˆ(Phase)**
- ë¼ì´í”„ì‚¬ì´í´ì—ì„œì˜ ê° ë¹Œë“œì˜ ë‹¨ê³„
![image](https://user-images.githubusercontent.com/87689191/194693784-acff6396-d2ea-46bd-bc8f-70e524bf2858.png)

<br/>

**ê³¨**
- í•˜ë‚˜ì˜ í”ŒëŸ¬ê·¸ì¸ì€ ì—¬ëŸ¬ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì§€ì›
- í”ŒëŸ¬ê·¸ì¸ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ê°ê°ì˜ ì‘ì—…ì„ ê³¨(goal)ì´ë¼ ì •ì˜

<br/>

**ê¸°ë³¸ í˜ì´ì¦ˆì™€ ê³¨ ê°„ì˜ ê´€ê³„**

![ìº¡ì²˜](https://user-images.githubusercontent.com/87689191/194702520-9dcfffe7-313b-4ddb-b8ce-b60266ecbeba.PNG)

- process_resources -> compile -> process_classes -> process_test_resources -> test_compile -> test -> prepare_package -> package ìˆœì„œë¡œ ì§„í–‰

<br/>

**ì˜ˆì‹œ**
```
$ mvn compile
```
- compile ë‹¨ê³„ ê¹Œì§€ ì‹¤í–‰
- process_resources -> compile `ë`

```
$ mvn compiler:compile
```
- ë”± compiler:compile ì´ í•˜ë‚˜ë§Œ ì‹¤í–‰

---
### Plugin

<br/>

**jar Plugin**
- manifest ì„¤ì •

**ì˜ˆì‹œì½”ë“œ**
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>3.2.2</version>
    <configuration>
        <archive>
            <manifest>
                <mainClass>com.nhnacademy.study.Application</mainClass>
            </manifest>
        </archive>
    </configuration>
</plugin>
```

<br/>

**Shade Plugin**

- uber jar(fat jar)
    - `maven-shade-plugin`ì„ ì‚¬ìš©í•˜ë©´ ì˜ì¡´ê´€ê³„ ë¼ì´ë¸ŒëŸ¬ë¦¬ê¹Œì§€ í•¨ê»˜ ë¬¶ì–´ì„œ jaríŒŒì¼ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

**ì˜ˆì‹œì½”ë“œ**
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <version>3.3.0</version>
    <executions>
        <execution>
            <phase>package</phase>
            <goals>
                <goal>shade</goal>
            </goals>
            <configuration>
                <transformers>
                    <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                        <mainClass>com.nhnacademy.client.Client</mainClass>
                    </transformer>
                </transformers>
            </configuration>
        </execution>
    </executions>
</plugin>
```

---
### ëª¨ë“ˆ

<br/>

**ë©€í‹° ëª¨ë“ˆ í”„ë¡œì íŠ¸**

**ì˜ˆì‹œ í”„ë¡œì íŠ¸ êµ¬ì¡°**

```
root
â”œâ”€â”€ child1
â”‚   â”œâ”€â”€ src
â”‚   â”‚   â”œâ”€â”€ main
â”‚   â”‚   â”‚   â”œâ”€â”€ java
â”‚   â”‚   â”‚   â””â”€â”€ resources
â”‚   â”‚   â””â”€â”€ test
â”‚   â”‚       â”œâ”€â”€ java
â”‚   â”‚       â””â”€â”€ resources
â”‚   â””â”€â”€ pom.xml
â”œâ”€â”€ child2
â”‚   â”œâ”€â”€ src
â”‚   â”‚   â”œâ”€â”€ main
â”‚   â”‚   â”‚   â”œâ”€â”€ java
â”‚   â”‚   â”‚   â””â”€â”€ resource
â”‚   â”‚   â””â”€â”€ test
â”‚   â”‚       â”œâ”€â”€ java
â”‚   â”‚       â””â”€â”€ resources
â”‚   â””â”€â”€ pom.xml
â””â”€â”€ pom.xml
```

- root í”„ë¡œì íŠ¸ pom.xml
```xml
<project ...>
    <groupId>com.nhnacademy</groupId>
    <artifactId>root</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>pom</packaging>         <!-- root í”„ë¡œì íŠ¸ëŠ” packagingì´ pom -->

    <!-- submodule í¬í•¨ -->
    <modules>
        <module>child1</module>
        <module>child2</module>
    </modules>
</project>
```

<br/>

- child1 pom.xml
```xml
<project ...>
    <!-- parent ì§€ì • -->
    <parent>
        <groupId>com.nhnacademy</groupId>
        <artifactId>root</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <!-- ìì‹ ì˜ artifact ì •ë³´ -->
    <groupId>com.nhnacademy</groupId>
    <artifactId>...</artifactId>
    <version>...</version>

</project>
```

- child2 pom.xml
```xml
<project ...>

    <!-- parent ì§€ì • -->
    <parent>
        <groupId>com.nhnacademy</groupId>
        <artifactId>root</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <!-- ìì‹ ì˜ artifact ì •ë³´ -->
    <groupId>com.nhnacademy</groupId>
    <artifactId>...</artifactId>
    <version>...</version>

    <dependencies>
        <dependency>
            <groupId>com.nhnacademy</groupId>
            <artifactId>child1</artifactId>
            <version>1.0-SNAPSHOT</version>
        </dependency>
    </dependencies>

</project>
```

---

### ê³¼ì œ
- 10ì›” 4ì¼ì— Intellijë¥¼ ë°°ìš°ë©´ì„œ í–ˆë˜ [ì‹¤ìŠµ ë° ê³¼ì œ íŒŒì¼](https://github.com/unhas01/nhnacademy/tree/master/Week6/Bank)ì„ ë©€í‹° í”„ë¡œì íŠ¸ë¡œ Mavenì„ ì´ìš©í•´ ë¹Œë“œí•˜ê¸°
- ê³¼ì œ : [ë§í¬ ğŸ”‘](https://github.com/unhas01/nhnacademy/tree/master/Week6/Bank3)