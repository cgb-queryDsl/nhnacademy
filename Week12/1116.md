# 1116 ì •ë¦¬

### Spring MVC 3ì¼ì°¨
---

**`@Value`**
- ì–´ë–¤ ê°’ì„ í‘œí˜„í•˜ëŠ” ì• ë…¸í…Œì´ì…˜
- í•„ë“œ, ë©”ì„œë“œ íŒŒë¼ë¯¸í„°, ìƒì„±ì íŒŒë¼ë¯¸í„°ì— ì‚¬ìš©
- lombokì˜ `@Value`ì™€ ë‹¤ë¦„

<Br/>

**Content Negotiation**
- /user/{userId} vs /users/{userId}
- Controller vs RestController
- text/html vs application/json
- ë‚´ìš©ì€ ë™ì¼
- ì–´ë– í•œ í¬ë§·ìœ¼ë¡œ ì‘ë‹µí• ì§€ ê²°ì •í•˜ëŠ” ì „ëµ

```java
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {
        configurer.favorParameter(true)
                  .parameterName("format")
                  .ignoreAcceptHeader(true)
                  .defaultContentType(MediaType.APPLICATION_JSON)
                  .mediaType("json", MediaType.APPLICATION_JSON)
                  .mediaType("xml", MediaType.APPLICATION_XML);
    }
}
```

<br/>

**Srping MVC Test**
- ì˜ì¡´ì„± ì¶”ê°€
```xml
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-test</artifactId>
    <scope>test</scope>
</dependency>
```

<br/>

**MockMvc**
- Spring MVC í…ŒìŠ¤íŠ¸ ì£¼ìš” ì§„ì…ì 
- StandaloneMockMvcBuilder : ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ìš©
- webAppContextSetup : í†µí•© í…ŒìŠ¤íŠ¸ìš©

```java
public class HomeControllerTest {
    private MockMvc mockMvc;

    @BeforeEach
    void setUp() {
        mockMvc = MockMvcBuilders.standaloneSetup(new HomeController())
                                 .build();
    }

    @Test
    void test() {
        mockMvc.perform(get("/"))
               .andExpect(status().isOk())
               .andExpect(view().name("index"));
    }
}
```

```java
@ExtendWith(SpringExtension.class)
@ContextHierarchy({
        @ContextConfiguration(classes = RootConfig.class),
        @ContextConfiguration(classes = WebConfig.class)
})
@WebAppConfiguration
class MemberControllerTest {

    @Autowired
    WebApplicationContext wac;

    MockMvc mockMvc;

    @BeforeEach
    void setUp() {
        mockMvc = MockMvcBuilders.webAppContextSetup(wac).build();
    }
}
```


---

### ê³¼ì œ

2ì¼ì°¨ ê³¼ì œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì´ì–´ì§

<br/>

**JSON/XML ì‘ë‹µ ì„¤ì •**
- Content Negotiation êµ¬í˜„
- REST API
    - í•™ìƒ ì •ë³´ ë“±ë¡: POST /studens
    - í•™ìƒ ì •ë³´ ì¡°íšŒ: GET /students/{studentId}
    - í•™ìƒ ì •ë³´ ìˆ˜ì •: PUT /students/{studentId}

<br/>

**REST API Controller**
- Test Coverage 100%ê°€ ë˜ë„ë¡ Test Code ì‘ì„±
- Unit Testë¡œ ì‘ì„±

<br/>

**ì½”ë“œ**
- ì½”ë“œ ë§í¬ : [ë§í¬ ğŸ”‘](https://github.com/unhas01/nhnacademy/tree/master/Week12/academy-spring-mvc-student-v3)


