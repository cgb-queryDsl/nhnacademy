# 1025 ì •ë¦¬

1024 ë‚´ìš©ê³¼ ì´ì–´ì§€ëŠ” ë‚´ìš© [ì´ì „ ë‚´ìš© ë§í¬ ğŸ”‘](https://github.com/unhas01/nhnacademy/blob/master/Week9/1024.md)

---

**RequestDispatcher**
- í˜„ì¬ ìš”ì²­ì— ëŒ€í•œ ì •ë³´ë¥¼ ì €ì¥í–ˆë‹¤ê°€ ë‹¤ë¥¸ ìì›ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ê¸°ëŠ¥
- forward
- include

<br/>

**response.sendRedirect()**

<img width="585" alt="image" src="https://user-images.githubusercontent.com/87689191/200834839-39c1c995-adb5-48b5-87e6-e4aab5f15815.png">

- ë¸Œë¼ìš°ì € ì…ì¥ì—ì„œ 2ë²ˆ ë™ì‘í•¨

<br/>

**rd.forward()**

<img width="363" alt="image" src="https://user-images.githubusercontent.com/87689191/200834980-f6633c9a-e4cb-417b-bb21-38bb18cc058c.png">

- ë¸Œë¼ìš°ì € ì…ì¥ì—ì„  1ë²ˆ ë™ì‘
- ë™ì¼í•œ ìš”ì²­ì— ëŒ€í•´ì„œëŠ” ë¬´í•œ ë°˜ë³µìœ¼ë¡œ ì²˜ë¦¬ë˜ì–´ì„œ ì—ëŸ¬ê°€ ë‚¨

<br/>

**Servlet Filter**
- ì§€ì •í•œ url íŒ¨í„´ì— í•´ë‹¹í•˜ëŠ” ìš”ì²­ì— ëŒ€í•´ ì„œë¸”ë¦¿ ì‹¤í–‰ ì „/í›„ì— ê³µí†µì ìœ¼ë¡œ ì ìš©í•  ì‘ì—…ì„ ì •ì˜
- í•„í„° ì²´ì¸ í˜•íƒœë¡œ ì œê³µ

<img width="491" alt="image" src="https://user-images.githubusercontent.com/87689191/201461626-50bc0997-aa88-45d2-ad61-e5e61ad5d0de.png">

- character setì„ ì„¤ì •í•˜ëŠ” í•„í„° ì‹¤ìŠµ
```java
public class CharacterEncodingFilter implements Filter {
    private String encoding;

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        this.encoding = filterConfig.getInitParameter("encoding");
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
        throws IOException, ServletException {
        request.setCharacterEncoding(this.encoding);
        chain.doFilter(request, response);
    }
}
```
```xml
<filter>
    <filter-name>characterEncodingFilter</filter-name>
    <filter-class>com.nhnacademy.servlet.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>characterEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
```

<br/>

**Listener**
- Servlet Containerê°€ ìˆ˜í–‰í•œ íŠ¹ì •í•œ íƒ€ì…ì˜ ë™ì‘ì„ ê°ì§€í•˜ì—¬ ì´ë²¤íŠ¸ì— ë³„ë„ì˜ ì‘ì—…ì„ ìˆ˜í–‰

<Br/>


---

### Servlet 3.0 Annotations

<Br/>

- `web.xml`ì— ì •ì˜í–ˆë˜ ë‚´ìš©ë“¤ì„ ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ í•´ê²°
    - `@WebServlet`
    - `@WebInitParam`
    - `@WebFilter`
    - `@WebListener`

---

### JSP

<br/>

**JSP**
- Java Server Pages
- htmlì´ë‚˜ xml ê¸°ë°˜ìœ¼ë¡œ Java ì½”ë“œë¥¼ ì‚½ì… ê°€ëŠ¥
- ë™ì ìœ¼ë¡œ ì›¹í˜ì´ì§€ë¥¼ ìƒì„±

<br/>

**JSP Attribute ë²ˆì™¸ ë‚´ìš©**
- Servletê³¼ ë¹„ìŠ·
- requestëŠ” ê°€ë³ê²Œ (ìš”ì²­ë§ˆë‹¤ í¬ê¸°ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸)
- scopeëŠ” ì‘ì€ ë‹¨ìœ„ë¡œ

<br/>

**include vs forward**
- include : í¬í•¨ì„ ì‹œì¼œì„œ ìš”ì²­
- forward : ì œì–´ê¶Œì„ ë„˜ê²¨ë²„ë¦¼
- íƒœê·¸ë¡œ ì‚¬ìš©ê°€ëŠ¥
    - `<jsp:include page='' />`
    - `<jsp:forward page='' />`

<br/>

**JavaBeans**
- ìë°”ë¡œ ì‘ì„±ëœ ì†Œí”„íŠ¸ì›¨ì–´ ì»´í¬ë„ŒíŠ¸
- != EJB
- != Spring Bean
- ì‚¬ìš©
    - `<jsp:useBean>`
    - `<jsp:setProperty>`
    - `<jsp:getProperty>`
- ì œì•½ì¡°ê±´
    - ì¸ìê°€ ì—†ëŠ” ê¸°ë³¸ ìƒì„±ì
    - Getter, Setter
    - Serializable êµ¬í˜„

---

### JSTL

- JSP í™•ì¥ íƒœê·¸

<br/>

**ì¢…ë¥˜**
|prefix|name|URI|ë‚´ìš©|
|----|----|---|----|
|c|core|http://java.sun.com/jsp/jstl/core|ë³€ìˆ˜ ì§€ì›, URL ê´€ë¦¬, íë¦„ ì œì–´|
|fn|function|http://java.sun.com/jsp/jstl/functions|ë¬¸ìì—´ ì¡°ì‘|
|fmt|formatting|http://java.sun.com/jsp/jstl/fmt|ë¡œì¼€ì¼, íƒ€ì„ì¡´, ë‚ ì§œ, ì‹œê°„, í™”í í¬ë§·íŒ…|
|x|xml|http://java.sun.com/jsp/jstl/xml|XML ì²˜ë¦¬|
|sql|sql|http://java.sun.com/jsp/jstl/sql|ë°ì´í„° ì†ŒìŠ¤ ì„¤ì •, SQL ì¿¼ë¦¬ ìˆ˜í–‰|


<br/>

**tag ì„ ì–¸**
```jsp
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
```

<br/>

----

### MVC

<br/>

**ê¸°ì¡´ JSP ê°œë°œ ë°©ì‹**

![image](https://user-images.githubusercontent.com/87689191/201470816-9a1c9b73-7701-4ef7-b65e-bece808fe2d7.png)

<br/>

**MVC Pattern**

<img width="535" alt="image" src="https://user-images.githubusercontent.com/87689191/201470839-5c1e0d00-691e-41a4-afa1-96eb417e9d04.png">

- `M`odel :ë°ì´í„° ì²˜ë¦¬ 
- `V`iew : í™”ë©´ ìƒì„±
- `C`ontroller : ìš”ì²­ ì²˜ë¦¬ ë° íë¦„ ì œì–´

<Br/>

**ê³µí†µ ì²˜ë¦¬ ë¶€ë¶„**
- ê³µí†µì ìœ¼ë¡œ ì¤‘ë³µë˜ëŠ” ë¶€ë¶„ë“¤ì„ í•œë²ˆì— ì²˜ë¦¬

<Br/>

**FrontServlet**

<img width="593" alt="image" src="https://user-images.githubusercontent.com/87689191/201471021-c7916e9a-8246-4eb3-b7b3-49de0f9d628d.png">

- ëª¨ë“  ìš”ì²­ì„ FrontServletì´ ë°›ìŒ
    - FrontServletì´ ë°›ì„ ìš”ì²­ì€ `.do` í™•ì¥ì ì‚¬ìš©
    - ì‹¤ì œ ìš”ì²­ì€ `.do`ê°€ ì—†ìŒ
- ìš”ì²­ URLì— ë”°ë¼ ì‹¤ì œ ìš”ì²­ì„ ì²˜ë¦¬í•  Servletìœ¼ë¡œ ìš”ì²­ì„ ì „ë‹¬
- ì‹¤ì œ ìš”ì²­ì„ ì²˜ë¦¬í•œ Servletì€ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì–´ë–¤ jspì—ì„œ view í• ì§€ ë°˜í™˜
- ì „ë‹¬í•´ ì¤€ jspë¡œ view ì²˜ë¦¬ ìœ„ì„
- jspëŠ” view ì²˜ë¦¬ ìˆ˜í–‰
- FrontServlet ìš”ì²­ì— ì‘ë‹µ

<br/>

--- 

### Command íŒ¨í„´

<br/>

**Command íŒ¨í„´**
- ìš”ì²­ì„ ê°ì²´ì˜ í˜•íƒœë¡œ ìº¡ìŠí™”
- commandë¥¼ ì €ì¥í•˜ê±°ë‚˜ ë©”ì„œë“œì— ì „ë‹¬í•˜ê±°ë‚˜ ë‹¤ë¥¸ ê°ì²´ë“¤ì²˜ëŸ¼ ë°˜í™˜í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë””ìì¸ íŒ¨í„´

<img width="688" alt="image" src="https://user-images.githubusercontent.com/87689191/201471171-06cfede5-0126-440c-a5eb-107f37c8c85b.png">


<br/>

```java
public interface Command (
    String execute(HttpServletRequest request, HttpServletResponse response);
)
```

<br/>

**FrontController íŒ¨í„´**
- ì›¹ ì‚¬ì´íŠ¸ì˜ ëª¨ë“  ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬
- ë³´ì•ˆ, êµ­ì œí™”, ë·° ì œê³µ ë“±ì˜ ê³µí†µì ì¸ ì‘ì—…ì„ ìˆ˜í–‰

<br/>

**ì‹¤ìŠµ ì½”ë“œ**
- ì‹¤ìŠµ ì½”ë“œ : [ë§í¬ ğŸ”‘](https://github.com/unhas01/nhnacademy/tree/master/Week9/jsp1)

---

### ê³¼ì œ

**NHN ë§ˆíŠ¸, Servlet version ë§ˆë¬´ë¦¬**
- ê¸°ì¡´ ê¸°ëŠ¥ ìœ„ì—ë‹¤
    - ì–¸ì–´ ë³€ê²½ (í•œ/ì˜)
- MVC Pattern + FrontController Pattern ì ìš©
- ê²°ì œ ê¸°ëŠ¥ ì¶”ê°€
    - ë¡œê·¸ì¸ í•˜ë©´ ì‚¬ìš©ìì—ê²Œ 20,000ì› ë¶€ì—¬
- ì´ˆê¸°í™”ë©´
    - ìƒí’ˆ ëª©ë¡ ë§í¬
    - ì¥ë°”êµ¬ë‹ˆ ë§í¬
    - í˜„ì¬ ì–¸ì–´ í‘œì‹œ
    - ì”ê³  í‘œì‹œ
- ì¥ë°”êµ¬ë‹ˆ
    - ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°
        - ìƒí’ˆ ìˆ˜ëŸ‰ ë¶€ì¡± ì‹œ AmountException
    - ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸´ ë¬¼ê±´ ì„ íƒí•´ì„œ ê²°ì œ : `POST /pay`
        - ê²°ì¬í•œ ê¸ˆì•¡ í‘œì‹œ
        - ê²°ì œ í›„ ì”ì•¡ í‘œì‹œ
        - ì”ì•¡ ë¶€ì¡± ì‹œ `NotEnoughMoneyExeption`
- ëª¨ë“  ë©”ì„¸ì§€ëŠ” í•œ/ì˜ 2ê°œ ì–¸ì–´ ì§€ì›

<br/>

**ì½”ë“œ**
- ê³¼ì œ ì½”ë“œ : [ë§í¬ ğŸ”‘](https://github.com/unhas01/nhnacademy/tree/master/Week9/nhnmart2)